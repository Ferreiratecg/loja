{"ast":null,"code":"import { FETCH_CLIENTE, LOGOUT_CLIENTE } from '../types';\nimport axios from 'axios';\nimport { API, versao, loja } from '../../config';\nimport { setCookie } from '../../utils/cookie';\nimport { getHeaders } from './helpers';\nimport Router from 'next/router';\nimport { autenticar, desautenticar } from './authActions';\nimport errorHandling from './errorHandling';\nexport var getRawData = function getRawData(data) {\n  var _data = data.split('/');\n\n  var ano = _data[2];\n\n  var _mes = Number(_data[1]);\n\n  var mes = _mes < 10 ? \"0\" + _mes : _mes;\n\n  var _dia = Number(_data[0]) + 1;\n\n  var dia = _dia < 10 ? \"0\" + _dia : _dia;\n  return \"\".concat(ano, \"-\").concat(mes, \"-\").concat(dia);\n};\nexport var fetchCliente = function fetchCliente(id, token) {\n  return function (dispatch) {\n    axios.get(\"\".concat(API, \"/\").concat(versao, \"/api/clientes/\").concat(id, \"?loja=\").concat(loja), getHeaders(token)).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  };\n};\nexport var newCliente = function newCliente(form, cb) {\n  return function (dispatch) {\n    axios.post(\"\".concat(API, \"/\").concat(versao, \"/api/clientes?loja=\").concat(loja), {\n      nome: form.nome,\n      password: form.senha,\n      cpf: form.CPF,\n      email: form.email,\n      telefones: [form.telefone],\n      endereco: {\n        local: form.local,\n        numero: form.numero,\n        complemento: form.complemento,\n        bairro: form.bairro,\n        cidade: form.cidade,\n        estado: form.estado,\n        CEP: form.CEP\n      },\n      dataDeNascimento: getRawData(form.dataDeNascimento)\n    }).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n      dispatch(autenticar({\n        email: form.email,\n        password: form.senha\n      }, null, cb));\n      cb(null);\n    })[\"catch\"](function (e) {\n      return cb(errorHandling(e));\n    });\n  };\n};\nexport var updateCliente = function updateCliente(form, id, token, cb) {\n  return function (dispatch) {\n    axios.put(\"\".concat(API, \"/\").concat(versao, \"/api/clientes/\").concat(id, \"?loja=\").concat(loja), {\n      nome: form.nome,\n      cpf: form.CPF,\n      telefones: [form.telefone],\n      endereco: {\n        local: form.local,\n        numero: form.numero,\n        complemento: form.complemento,\n        bairro: form.bairro,\n        cidade: form.cidade,\n        estado: form.estado,\n        CEP: form.CEP\n      },\n      dataDeNascimento: getRawData(form.dataDeNascimento)\n    }, getHeaders(token)).then(function (response) {\n      dispatch({\n        type: FETCH_CLIENTE,\n        payload: response.data\n      });\n      cb(null);\n    })[\"catch\"](function (e) {\n      return cb(errorHandling(e));\n    });\n  };\n};\nexport var logoutCliente = function logoutCliente() {\n  return function (dispatch) {\n    dispatch(desautenticar());\n    dispatch({\n      type: LOGOUT_CLIENTE\n    });\n  };\n};\nexport default {\n  fetchCliente: fetchCliente,\n  newCliente: newCliente,\n  updateCliente: updateCliente,\n  logoutCliente: logoutCliente\n};","map":{"version":3,"sources":["C:/sams-papelaria/loja/redux/actions/clienteActions.js"],"names":["FETCH_CLIENTE","LOGOUT_CLIENTE","axios","API","versao","loja","setCookie","getHeaders","Router","autenticar","desautenticar","errorHandling","getRawData","data","_data","split","ano","_mes","Number","mes","_dia","dia","fetchCliente","id","token","dispatch","get","then","response","type","payload","e","console","log","newCliente","form","cb","post","nome","password","senha","cpf","CPF","email","telefones","telefone","endereco","local","numero","complemento","bairro","cidade","estado","CEP","dataDeNascimento","updateCliente","put","logoutCliente"],"mappings":"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","sourcesContent":["import { \r\n    FETCH_CLIENTE,\r\n    LOGOUT_CLIENTE\r\n} from '../types';\r\nimport axios from 'axios';\r\nimport { API, versao, loja } from '../../config';\r\nimport { setCookie } from '../../utils/cookie';\r\nimport { getHeaders } from './helpers';\r\nimport Router from 'next/router';\r\nimport { autenticar, desautenticar } from './authActions';\r\nimport errorHandling from './errorHandling';\r\n\r\nexport const getRawData = (data) => {\r\n    let _data = data.split('/');\r\n    let ano = _data[2];\r\n    let _mes = Number(_data[1]);\r\n    let mes = _mes < 10 ? \"0\"+_mes : _mes;\r\n    let _dia = Number(_data[0]) + 1;\r\n    let dia = _dia < 10 ? \"0\"+_dia : _dia;\r\n    return `${ano}-${mes}-${dia}`;\r\n};\r\n\r\nexport const fetchCliente = (id, token) => dispatch => {\r\n    axios.get(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, getHeaders(token))\r\n    .then((response) => {\r\n        dispatch({ type: FETCH_CLIENTE, payload: response.data })\r\n    })\r\n    .catch(e => console.log(e));\r\n}\r\n\r\nexport const newCliente = (form, cb) => dispatch => {\r\n    axios.post(`${API}/${versao}/api/clientes?loja=${loja}`, {\r\n        nome: form.nome,\r\n        password: form.senha,\r\n        cpf: form.CPF,\r\n        email: form.email,\r\n        telefones: [form.telefone],\r\n        endereco: {\r\n            local: form.local,\r\n            numero: form.numero,\r\n            complemento: form.complemento,\r\n            bairro: form.bairro,\r\n            cidade: form.cidade,\r\n            estado: form.estado,\r\n            CEP: form.CEP\r\n        },\r\n        dataDeNascimento: getRawData(form.dataDeNascimento)\r\n    })\r\n    .then((response) => {\r\n        dispatch({ type: FETCH_CLIENTE, payload: response.data });\r\n        dispatch(autenticar({ email: form.email, password: form.senha }, null, cb));\r\n        cb(null);\r\n    })\r\n    .catch(e => cb(errorHandling(e)));\r\n};\r\n\r\nexport const updateCliente = (form, id, token, cb) => dispatch => {\r\n    axios.put(`${API}/${versao}/api/clientes/${id}?loja=${loja}`, {\r\n        nome: form.nome,\r\n        cpf: form.CPF,\r\n        telefones: [form.telefone],\r\n        endereco: {\r\n            local: form.local,\r\n            numero: form.numero,\r\n            complemento: form.complemento,\r\n            bairro: form.bairro,\r\n            cidade: form.cidade,\r\n            estado: form.estado,\r\n            CEP: form.CEP\r\n        },\r\n        dataDeNascimento: getRawData(form.dataDeNascimento)\r\n    }, getHeaders(token))\r\n    .then((response) => {\r\n        dispatch({ type: FETCH_CLIENTE, payload: response.data });\r\n        cb(null);\r\n    })\r\n    .catch(e => cb(errorHandling(e)));\r\n}\r\n\r\nexport const logoutCliente = () => dispatch => {\r\n    dispatch(desautenticar());\r\n    dispatch({ type: LOGOUT_CLIENTE })\r\n}\r\n\r\nexport default {\r\n    fetchCliente,\r\n    newCliente,\r\n    updateCliente,\r\n    logoutCliente\r\n};"]},"metadata":{},"sourceType":"module"}