{"ast":null,"code":"var _jsxFileName = \"C:\\\\sams-papelaria\\\\loja\\\\containers\\\\Checkout\\\\DadosPagamento.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport FormRadio from '../../components/Inputs/FormRadio';\nimport FormSimples from '../../components/Inputs/FormSimples';\nimport { connect } from 'react-redux';\nimport actions from '../../redux/actions';\nimport { formatCPF, formatCartao, formatNumber } from '../../utils/format';\nimport { formatMoney } from '../../utils';\nimport { validateCPF } from '../../utils/validate';\n\nclass DadosPagamento extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      erros: {}\n    });\n\n    _defineProperty(this, \"onChange\", (field, value) => {\n      console.log(field, value);\n      this.props.setForm({\n        [field]: value\n      }).then(() => this.validate());\n    });\n  }\n\n  componentDidMount() {\n    this.props.getSessionPagamento();\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      numeroCartao,\n      mesCartao,\n      anoCartao,\n      CVVCartao,\n      credit_card_token,\n      bandeira_cartao,\n      parcelasCartao\n    } = this.props.form;\n\n    if (!bandeira_cartao && numeroCartao && numeroCartao.split(' ').join('').length > 7) {\n      this.getBrand();\n    }\n\n    if (!credit_card_token && numeroCartao && numeroCartao.split(' ').join('').length === 16 && mesCartao && mesCartao.length === 2 && anoCartao && anoCartao.length === 4 && CVVCartao && CVVCartao.length === 3 && bandeira_cartao) this.submitCartaoHash();\n    if (!parcelasCartao && bandeira_cartao || parcelasCartao && bandeira_cartao && prevProps.freteSelecionado !== this.props.freteSelecionado) this.getParcelas();\n  }\n\n  getBrand() {\n    const {\n      numeroCartao\n    } = this.props.form;\n    PagSeguroDirectPayment.getBrand({\n      cardBin: numeroCartao.split(' ').join('').slice(0, 6),\n      success: r => this.props.setForm({\n        bandeira_cartao: r.brand\n      }),\n      error: r => console.log(r)\n    });\n  }\n\n  submitCartaoHash() {\n    const {\n      numeroCartao,\n      mesCartao,\n      anoCartao,\n      CVVCartao,\n      bandeira_cartao\n    } = this.props.form;\n    const params = {\n      cardNumber: numeroCartao.split(' ').join(''),\n      brand: bandeira_cartao.name,\n      cvv: CVVCartao,\n      expirationMonth: mesCartao,\n      expirationYear: anoCartao,\n      success: r => this.props.setForm({\n        credit_card_token: r.card.token\n      }),\n      error: r => console.log(r)\n    };\n    PagSeguroDirectPayment.createCardToken(params);\n  }\n\n  getParcelas() {\n    const {\n      freteSelecionado,\n      carrinho\n    } = this.props;\n    const {\n      bandeira_cartao\n    } = this.props.form;\n    let valorTotal = carrinho.reduce((all, item) => all + Number(item.precoUnitario) * Number(item.quantidade), 0);\n    let freteValor = Number(freteSelecionado.Valor.replace(',', '.'));\n    PagSeguroDirectPayment.getInstallments({\n      amount: valorTotal + freteValor,\n      maxInstallmentNoInterest: 6,\n      maxInstallment: 6,\n      brand: bandeira_cartao.name,\n      success: data => {\n        this.props.setForm({\n          parcelasCartao: data.installments\n        });\n        this.props.setForm({\n          parcelasCartaoSelecionada: data.installments[bandeira_cartao.name][0]\n        });\n      },\n      error: r => console.log(r)\n    });\n  }\n\n  renderOpcoesPagamento() {\n    const {\n      tipoPagamentoSelecionado\n    } = this.props;\n    return __jsx(\"div\", {\n      className: \"flex horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, __jsx(FormRadio, {\n      name: \"tipo_pagamento_selecionado\",\n      checked: tipoPagamentoSelecionado === 'boleto',\n      onChange: () => this.props.setTipoPagamento(\"boleto\"),\n      label: \"Boleto Banc\\xE1rio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, __jsx(FormRadio, {\n      name: \"tipo_pagamento_selecionado\",\n      checked: tipoPagamentoSelecionado === 'cartao',\n      onChange: () => this.props.setTipoPagamento(\"cartao\"),\n      label: \"Cart\\xE3o de Cr\\xE9dito\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    })));\n  }\n\n  validate() {\n    const {\n      tipoPagamentoSelecionado\n    } = this.props;\n    const {\n      CPF,\n      CPFboleto,\n      numeroCartao,\n      nomeCartao,\n      mesCartao,\n      anoCartao,\n      parcelasCartaoSelecionada,\n      CVVCartao\n    } = this.props.form;\n    const erros = {};\n\n    if (tipoPagamentoSelecionado === \"boleto\") {\n      if (!CPFboleto && !CPF) erros.CPFboleto = \"Preencha aqui com o seu CPF\";\n      if (CPFboleto && CPFboleto.length !== 14 && !validateCPF(CPFboleto)) erros.CPFboleto = \"Preencha aqui com o seu CPF corretamente\";\n    } else {\n      if (!numeroCartao || numeroCartao.length !== 19) erros.numeroCartao = \"Preencha aqui com o número do seu cartão\";\n      if (!nomeCartao) erros.nomeCartao = \"Preencha aqui com o nome que está no cartão\";\n      if (!mesCartao || mesCartao.length !== 2) erros.mesCartao = \"Preencha aqui com o mês de vencimento do cartão\";\n      if (!anoCartao || anoCartao.length !== 4) erros.anoCartao = \"Preencha aqui com o ano de vencimento do cartão\";\n      if (!parcelasCartaoSelecionada) erros.parcelasCartaoSelecionada = \"Selecione uma forma de pagamento\";\n      if (!CVVCartao || CVVCartao.length !== 3) erros.CVVCartao = \"Preencha aqui com o código de segurança do cartão\";\n    }\n\n    this.setState({\n      erros\n    });\n    return !(Object.keys(erros).length > 0);\n  }\n\n  renderPagamentoComBoleto() {\n    const {\n      CPF,\n      CPFboleto\n    } = this.props.form;\n    const {\n      erros\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"Dados-Pagamento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, __jsx(FormSimples, {\n      value: CPFboleto || CPF,\n      name: \"CPF\",\n      erro: erros.CPFboleto,\n      placeholder: \"CPF\",\n      label: \"CPF\",\n      onChange: e => this.onChange(\"CPFboleto\", formatCPF(e.target.value)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  renderPagamentoComCartao() {\n    const {\n      nomeCartao,\n      numeroCartao,\n      CVVCartao,\n      mesCartao,\n      anoCartao,\n      parcelasCartao,\n      parcelasCartaoSelecionada,\n      bandeira_cartao\n    } = this.props.form;\n    const {\n      erros\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"Dados-Pagamento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, __jsx(FormSimples, {\n      value: nomeCartao,\n      erro: erros.nomeCartao,\n      name: \"nomeCartao\",\n      placeholder: \"Nome como escrito no cart\\xE3o\",\n      label: \"Nome Completo no Cart\\xE3o\",\n      onChange: e => this.onChange(\"nomeCartao\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"flex horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, __jsx(FormSimples, {\n      value: numeroCartao,\n      erro: erros.numeroCartao,\n      name: \"numeroCartao\",\n      placeholder: \"XXXX XXXX XXXX XXXX\",\n      label: \"N\\xFAmero do Cart\\xE3o\",\n      onChange: e => this.onChange(\"numeroCartao\", formatCartao(e.target.value)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    })), __jsx(\"div\", {\n      className: \"flex-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, __jsx(FormSimples, {\n      value: CVVCartao,\n      erro: erros.CVVCartao,\n      name: \"CVVCartao\",\n      placeholder: \"XXX\",\n      label: \"C\\xF3digo de Seguran\\xE7a do Cart\\xE3o\",\n      onChange: e => this.onChange(\"CVVCartao\", formatNumber(e.target.value, 3)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }))), __jsx(\"div\", {\n      className: \"form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    }, \"Data de Validade\")), __jsx(\"div\", {\n      className: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, __jsx(FormSimples, {\n      value: mesCartao,\n      erro: erros.mesCartao,\n      name: \"mesCartao\",\n      placeholder: \"MM\",\n      label: \"M\\xEAs\",\n      onChange: e => this.onChange(\"mesCartao\", formatNumber(e.target.value, 2)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }), __jsx(\"span\", {\n      className: \"slash-pagamento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }, \"\\xA0/\\xA0\"), __jsx(FormSimples, {\n      value: anoCartao,\n      erro: erros.anoCartao,\n      name: \"anoCartao\",\n      placeholder: \"AAAA\",\n      label: \"Ano\",\n      onChange: e => this.onChange(\"anoCartao\", formatNumber(e.target.value, 4)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }\n    })), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, \"Parcelas\")), parcelasCartao && parcelasCartaoSelecionada && __jsx(\"div\", {\n      className: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 25\n      }\n    }, __jsx(\"select\", {\n      name: \"parcela\",\n      value: parcelasCartaoSelecionada.quantity,\n      onChange: e => this.onChange(\"parcelasCartaoSelecionada\", parcelasCartao[bandeira_cartao.name][e.target.value - 1]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 29\n      }\n    }, !parcelasCartaoSelecionada && __jsx(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 37\n      }\n    }, \"Selecione a quantidade de parcelas para pagamento\"), parcelasCartao[bandeira_cartao.name].slice(0, 6).map((item, index) => __jsx(\"option\", {\n      key: index,\n      value: item.quantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 41\n      }\n    }, item.quantity, \"x de \", formatMoney(item.totalAmount / item.quantity), \" sem juros\"))), erros.parcelasCartaoSelecionada && __jsx(\"small\", {\n      className: \"erro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 33\n      }\n    }, erros.parcelasCartaoSelecionada)));\n  }\n\n  render() {\n    const {\n      tipoPagamentoSelecionado\n    } = this.props;\n    return __jsx(\"div\", {\n      className: \"Dados-Pagamento-Container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 13\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }\n    }, \"DADOS DE PAGAMENTO\"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }\n    }), this.renderOpcoesPagamento(), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    }), tipoPagamentoSelecionado === 'boleto' && this.renderPagamentoComBoleto(), tipoPagamentoSelecionado === 'cartao' && this.renderPagamentoComCartao());\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  usuario: state.auth.usuario,\n  carrinho: state.carrinho.carrinho,\n  cliente: state.cliente.cliente,\n  form: state.checkout.form,\n  tipoPagamentoSelecionado: state.checkout.tipoPagamentoSelecionado,\n  sessionId: state.checkout.sessionId,\n  senderHash: state.checkout.senderHash,\n  freteSelecionado: state.carrinho.freteSelecionado\n});\n\nexport default connect(mapStateToProps, actions)(DadosPagamento);","map":{"version":3,"sources":["C:/sams-papelaria/loja/containers/Checkout/DadosPagamento.js"],"names":["React","Component","FormRadio","FormSimples","connect","actions","formatCPF","formatCartao","formatNumber","formatMoney","validateCPF","DadosPagamento","erros","field","value","console","log","props","setForm","then","validate","componentDidMount","getSessionPagamento","componentDidUpdate","prevProps","numeroCartao","mesCartao","anoCartao","CVVCartao","credit_card_token","bandeira_cartao","parcelasCartao","form","split","join","length","getBrand","submitCartaoHash","freteSelecionado","getParcelas","PagSeguroDirectPayment","cardBin","slice","success","r","brand","error","params","cardNumber","name","cvv","expirationMonth","expirationYear","card","token","createCardToken","carrinho","valorTotal","reduce","all","item","Number","precoUnitario","quantidade","freteValor","Valor","replace","getInstallments","amount","maxInstallmentNoInterest","maxInstallment","data","installments","parcelasCartaoSelecionada","renderOpcoesPagamento","tipoPagamentoSelecionado","setTipoPagamento","CPF","CPFboleto","nomeCartao","setState","Object","keys","renderPagamentoComBoleto","state","e","onChange","target","renderPagamentoComCartao","quantity","map","index","totalAmount","render","mapStateToProps","usuario","auth","cliente","checkout","sessionId","senderHash"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport FormRadio from '../../components/Inputs/FormRadio';\r\nimport FormSimples from '../../components/Inputs/FormSimples';\r\n\r\nimport { connect } from 'react-redux';\r\nimport actions from '../../redux/actions';\r\nimport { formatCPF, formatCartao, formatNumber } from '../../utils/format';\r\nimport { formatMoney } from '../../utils';\r\nimport { validateCPF } from '../../utils/validate';\r\n\r\nclass DadosPagamento extends Component{\r\n\r\n    state = { erros: {} }\r\n\r\n    componentDidMount(){\r\n        this.props.getSessionPagamento();\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        const {\r\n            numeroCartao,\r\n            mesCartao,\r\n            anoCartao,\r\n            CVVCartao,\r\n            credit_card_token,\r\n            bandeira_cartao,\r\n            parcelasCartao,\r\n        } = this.props.form;\r\n\r\n        if(!bandeira_cartao && numeroCartao && numeroCartao.split(' ').join('').length > 7){\r\n            this.getBrand();\r\n        }\r\n\r\n        if(\r\n            !credit_card_token &&\r\n            numeroCartao && numeroCartao.split(' ').join('').length === 16 &&\r\n            mesCartao && mesCartao.length === 2 &&\r\n            anoCartao && anoCartao.length === 4 &&\r\n            CVVCartao && CVVCartao.length === 3 &&\r\n            bandeira_cartao \r\n        ) this.submitCartaoHash();\r\n\r\n        if( ( !parcelasCartao && bandeira_cartao ) ||\r\n            ( parcelasCartao && bandeira_cartao && prevProps.freteSelecionado !== this.props.freteSelecionado )\r\n        ) this.getParcelas();\r\n    }\r\n\r\n    getBrand(){\r\n        const { numeroCartao } = this.props.form;\r\n        PagSeguroDirectPayment.getBrand({\r\n            cardBin: numeroCartao.split(' ').join('').slice(0,6),\r\n            success: (r) =>this.props.setForm({ bandeira_cartao: r.brand }),\r\n            error: (r) => console.log(r)\r\n        });\r\n    }\r\n\r\n    submitCartaoHash(){\r\n        const {\r\n            numeroCartao,\r\n            mesCartao,\r\n            anoCartao,\r\n            CVVCartao,\r\n            bandeira_cartao\r\n        } = this.props.form;\r\n        const params = {\r\n            cardNumber: numeroCartao.split(' ').join(''),\r\n            brand: bandeira_cartao.name,\r\n            cvv: CVVCartao,\r\n            expirationMonth: mesCartao,\r\n            expirationYear: anoCartao,\r\n            success: (r) => this.props.setForm({ credit_card_token: r.card.token }),\r\n            error: (r) => console.log(r)\r\n        };\r\n        PagSeguroDirectPayment.createCardToken(params);\r\n    }\r\n\r\n    getParcelas(){\r\n        const { freteSelecionado, carrinho } = this.props;\r\n        const { bandeira_cartao } = this.props.form;\r\n\r\n        let valorTotal = carrinho.reduce(\r\n                            (all, item) => \r\n                            all + (Number(item.precoUnitario) * Number(item.quantidade)), 0\r\n                        );\r\n        let freteValor = Number(freteSelecionado.Valor.replace(',','.'));\r\n\r\n        PagSeguroDirectPayment.getInstallments({\r\n            amount: valorTotal + freteValor,\r\n            maxInstallmentNoInterest: 6,\r\n            maxInstallment: 6,\r\n            brand: bandeira_cartao.name,\r\n            success: (data) => {\r\n                this.props.setForm({ parcelasCartao: data.installments });\r\n                this.props.setForm({ parcelasCartaoSelecionada: data.installments[bandeira_cartao.name][0] });\r\n            },\r\n            error: (r) => console.log(r)\r\n        });\r\n    }\r\n\r\n    renderOpcoesPagamento(){\r\n        const { tipoPagamentoSelecionado } = this.props;\r\n        return (\r\n            <div className=\"flex horizontal\">\r\n                <div className=\"flex-1\">\r\n                    <FormRadio \r\n                        name=\"tipo_pagamento_selecionado\" \r\n                        checked={tipoPagamentoSelecionado === 'boleto'} \r\n                        onChange={() => this.props.setTipoPagamento(\"boleto\")}\r\n                        label=\"Boleto Bancário\" />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <FormRadio \r\n                        name=\"tipo_pagamento_selecionado\" \r\n                        checked={tipoPagamentoSelecionado === 'cartao'} \r\n                        onChange={() => this.props.setTipoPagamento(\"cartao\")}\r\n                        label=\"Cartão de Crédito\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    validate(){\r\n        const { tipoPagamentoSelecionado } = this.props;\r\n        const { \r\n            CPF, CPFboleto,\r\n            numeroCartao, nomeCartao, mesCartao, anoCartao, parcelasCartaoSelecionada, CVVCartao\r\n        } = this.props.form;\r\n        const erros = {};\r\n\r\n        if(tipoPagamentoSelecionado === \"boleto\"){\r\n            if(!CPFboleto && !CPF) erros.CPFboleto = \"Preencha aqui com o seu CPF\";\r\n            if(CPFboleto && CPFboleto.length !== 14 && !validateCPF(CPFboleto))\r\n                erros.CPFboleto = \"Preencha aqui com o seu CPF corretamente\";\r\n        } else {\r\n            if(!numeroCartao || numeroCartao.length !== 19) erros.numeroCartao = \"Preencha aqui com o número do seu cartão\";\r\n            if(!nomeCartao) erros.nomeCartao = \"Preencha aqui com o nome que está no cartão\";\r\n            if(!mesCartao || mesCartao.length !== 2) erros.mesCartao = \"Preencha aqui com o mês de vencimento do cartão\";\r\n            if(!anoCartao || anoCartao.length !== 4) erros.anoCartao = \"Preencha aqui com o ano de vencimento do cartão\";\r\n            if(!parcelasCartaoSelecionada) erros.parcelasCartaoSelecionada = \"Selecione uma forma de pagamento\";\r\n            if(!CVVCartao || CVVCartao.length !== 3) erros.CVVCartao = \"Preencha aqui com o código de segurança do cartão\";\r\n        }\r\n\r\n        this.setState({ erros });\r\n        return !( Object.keys(erros).length > 0 );\r\n    }\r\n\r\n    onChange = (field, value) => {\r\n        console.log(field, value)\r\n    this.props.setForm({ [field]: value }).then(() => this.validate());\r\n    }\r\n    renderPagamentoComBoleto(){\r\n        const { CPF, CPFboleto } = this.props.form;\r\n        const { erros } = this.state;\r\n        return (\r\n            <div className=\"Dados-Pagamento\">\r\n                <FormSimples \r\n                    value={CPFboleto || CPF} \r\n                    name=\"CPF\" \r\n                    erro={erros.CPFboleto}\r\n                    placeholder=\"CPF\" \r\n                    label=\"CPF\" \r\n                    onChange={(e) => this.onChange(\"CPFboleto\", formatCPF(e.target.value))} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderPagamentoComCartao(){\r\n        const { \r\n            nomeCartao, \r\n            numeroCartao, \r\n            CVVCartao, \r\n            mesCartao, \r\n            anoCartao, \r\n            parcelasCartao, \r\n            parcelasCartaoSelecionada,\r\n            bandeira_cartao\r\n        } = this.props.form;\r\n        const { erros } = this.state;\r\n        return (\r\n            <div className=\"Dados-Pagamento\">\r\n                <FormSimples \r\n                    value={nomeCartao} \r\n                    erro={erros.nomeCartao}\r\n                    name=\"nomeCartao\" \r\n                    placeholder=\"Nome como escrito no cartão\" \r\n                    label=\"Nome Completo no Cartão\" \r\n                    onChange={(e) => this.onChange(\"nomeCartao\", e.target.value)} />\r\n                <div className=\"flex horizontal\">\r\n                    <div className=\"flex-1\">\r\n                        <FormSimples \r\n                            value={numeroCartao} \r\n                            erro={erros.numeroCartao}\r\n                            name=\"numeroCartao\" \r\n                            placeholder=\"XXXX XXXX XXXX XXXX\" \r\n                            label=\"Número do Cartão\" \r\n                            onChange={(e) => this.onChange(\"numeroCartao\", formatCartao(e.target.value))} />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                        <FormSimples \r\n                            value={CVVCartao} \r\n                            erro={erros.CVVCartao}\r\n                            name=\"CVVCartao\" \r\n                            placeholder=\"XXX\" \r\n                            label=\"Código de Segurança do Cartão\" \r\n                            onChange={(e) => this.onChange(\"CVVCartao\", formatNumber(e.target.value, 3))} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-input\">\r\n                    <label>Data de Validade</label>\r\n                </div>\r\n                <div className=\"flex\">\r\n                    <FormSimples \r\n                        value={mesCartao} \r\n                        erro={erros.mesCartao}\r\n                        name=\"mesCartao\" \r\n                        placeholder=\"MM\" \r\n                        label=\"Mês\" \r\n                        onChange={(e) => this.onChange(\"mesCartao\", formatNumber(e.target.value, 2))} />\r\n                    <span className=\"slash-pagamento\">&nbsp;/&nbsp;</span>\r\n                    <FormSimples \r\n                        value={anoCartao} \r\n                        erro={erros.anoCartao}\r\n                        name=\"anoCartao\" \r\n                        placeholder=\"AAAA\" \r\n                        label=\"Ano\" \r\n                        onChange={(e) => this.onChange(\"anoCartao\", formatNumber(e.target.value, 4))} />\r\n                </div>\r\n                <br />\r\n                <div className=\"form-input\">\r\n                    <label>Parcelas</label>\r\n                </div>\r\n                {\r\n                    parcelasCartao && parcelasCartaoSelecionada && (\r\n                        <div className=\"flex\">\r\n                            <select \r\n                                name=\"parcela\" \r\n                                value={parcelasCartaoSelecionada.quantity}\r\n                                onChange={(e) => this.onChange(\"parcelasCartaoSelecionada\", parcelasCartao[bandeira_cartao.name][e.target.value - 1])} >\r\n                                { \r\n                                    !parcelasCartaoSelecionada &&\r\n                                    <option>Selecione a quantidade de parcelas para pagamento</option>\r\n                                }\r\n                                {\r\n                                    parcelasCartao[bandeira_cartao.name]\r\n                                    .slice(0,6)\r\n                                    .map((item, index) => (\r\n                                        <option key={index} value={item.quantity}>\r\n                                            {item.quantity}x de {formatMoney(item.totalAmount/item.quantity)} sem juros\r\n                                        </option> \r\n                                    ))\r\n                                }                               \r\n                            </select>\r\n                            { erros.parcelasCartaoSelecionada && (\r\n                                <small className=\"erro\">{erros.parcelasCartaoSelecionada}</small>\r\n                            )}\r\n                        </div>\r\n                    )\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        const { tipoPagamentoSelecionado } = this.props;\r\n        return (\r\n            <div className=\"Dados-Pagamento-Container\">\r\n                <h2>DADOS DE PAGAMENTO</h2>\r\n                <br />\r\n                { this.renderOpcoesPagamento() }\r\n                <br />\r\n                <br />\r\n                { tipoPagamentoSelecionado === 'boleto' && this.renderPagamentoComBoleto() }\r\n                { tipoPagamentoSelecionado === 'cartao' && this.renderPagamentoComCartao() }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    usuario: state.auth.usuario,\r\n    carrinho: state.carrinho.carrinho,\r\n    cliente: state.cliente.cliente,\r\n    form: state.checkout.form,\r\n    tipoPagamentoSelecionado: state.checkout.tipoPagamentoSelecionado,\r\n    sessionId: state.checkout.sessionId,\r\n    senderHash: state.checkout.senderHash,\r\n    freteSelecionado: state.carrinho.freteSelecionado\r\n});\r\n\r\nexport default connect(mapStateToProps, actions)(DadosPagamento);"]},"metadata":{},"sourceType":"module"}