{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\ecommerce-git\\\\loja\\\\containers\\\\Cliente\\\\DadosCliente.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport FormSimples from '../../components/Inputs/FormSimples';\nimport { connect } from 'react-redux';\nimport actions from '../../redux/actions';\nimport moment from 'moment';\nimport { validateCPF } from '../../utils/validate';\nimport { formatDataDeNascimento, formatTelefone, formatCPF } from '../../utils/format';\n\nvar DadosClienteContainer = /*#__PURE__*/function (_Component) {\n  _inherits(DadosClienteContainer, _Component);\n\n  var _super = _createSuper(DadosClienteContainer);\n\n  function DadosClienteContainer() {\n    var _this;\n\n    _classCallCheck(this, DadosClienteContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      erros: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (field, e, value) {\n      _this.props.setForm(_defineProperty({}, field, value || e.target.value), null).then(function () {\n        return _this.validate();\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(DadosClienteContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.setForm({\n        email: \"\",\n        senha: \"\",\n        nome: this.props.cliente ? this.props.cliente.nome : \"\",\n        CPF: this.props.cliente ? this.props.cliente.cpf : \"\",\n        telefone: this.props.cliente && this.props.cliente.telefones ? this.props.cliente.telefones[0] : \"\",\n        dataDeNascimento: this.props.cliente ? moment(this.props.cliente.dataDeNascimento).format(\"DD/MM/YYYY\") : \"\"\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!prevProps.cliente && this.props.cliente) {\n        var _this$props$cliente = this.props.cliente,\n            nome = _this$props$cliente.nome,\n            cpf = _this$props$cliente.cpf,\n            telefones = _this$props$cliente.telefones,\n            dataDeNascimento = _this$props$cliente.dataDeNascimento;\n        this.props.setForm({\n          nome: nome,\n          CPF: cpf,\n          telefone: telefones[0],\n          dataDeNascimento: moment(dataDeNascimento).format(\"DD/MM/YYYY\")\n        });\n      }\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var _this$props$form = this.props.form,\n          email = _this$props$form.email,\n          senha = _this$props$form.senha,\n          nome = _this$props$form.nome,\n          CPF = _this$props$form.CPF,\n          dataDeNascimento = _this$props$form.dataDeNascimento,\n          telefone = _this$props$form.telefone;\n      var usuario = this.props.usuario;\n      var erros = {};\n      if (!usuario && !email) erros.email = \"Preencha aqui com o seu email\";\n      if (!usuario && !senha) erros.senha = \"Preencha aqui com a sua senha\";\n      if (!nome) erros.nome = \"Preencha aqui com o seu nome\";\n      if (!CPF || CPF.length !== 14) erros.CPF = \"Preencha aqui com o seu CPF\";\n      if (CPF && CPF.length === 14 && !validateCPF(CPF)) erros.CPF = \"Preencha aqui com o seu CPF corretamente\";\n      if (!dataDeNascimento || dataDeNascimento.length !== 10) erros.dataDeNascimento = \"Preencha aqui com a sua data de nascimento\";\n      if (!telefone || telefone.length < 11) erros.telefone = \"Preencha aqui com o seu telefone\";\n      this.setState({\n        erros: erros\n      });\n      return !(Object.keys(erros).length > 0);\n    }\n  }, {\n    key: \"renderDadosRegistro\",\n    value: function renderDadosRegistro() {\n      var _this2 = this;\n\n      var _this$props$form2 = this.props.form,\n          email = _this$props$form2.email,\n          senha = _this$props$form2.senha;\n      var erros = this.state.erros;\n      return __jsx(\"div\", {\n        className: \"flex-1 flex horizontal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, __jsx(FormSimples, {\n        value: email || \"\",\n        name: \"email\",\n        placeholder: \"E-mail\",\n        label: \"E-mail\",\n        erro: erros.email,\n        onChange: function onChange(e) {\n          return _this2.onChange(\"email\", e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      }, __jsx(FormSimples, {\n        value: senha || \"\",\n        name: \"senha\",\n        placeholder: \"Senha\",\n        label: \"Senha\",\n        type: \"password\",\n        erro: erros.senha,\n        onChange: function onChange(e) {\n          return _this2.onChange(\"senha\", e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }\n      })));\n    }\n  }, {\n    key: \"renderDadosUsuario\",\n    value: function renderDadosUsuario() {\n      var _this3 = this;\n\n      var _this$props$form3 = this.props.form,\n          nome = _this$props$form3.nome,\n          CPF = _this$props$form3.CPF,\n          dataDeNascimento = _this$props$form3.dataDeNascimento,\n          telefone = _this$props$form3.telefone;\n      var erros = this.state.erros;\n      return __jsx(\"div\", {\n        className: \"flex-1 flex vertical\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, __jsx(FormSimples, {\n        value: nome || \"\",\n        name: \"nome\",\n        placeholder: \"Nome\",\n        label: \"Nome\",\n        erro: erros.nome,\n        onChange: function onChange(e) {\n          return _this3.onChange(\"nome\", e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, __jsx(FormSimples, {\n        value: CPF || \"\",\n        name: \"CPF\",\n        placeholder: \"CPF\",\n        label: \"CPF\",\n        erro: erros.CPF,\n        onChange: function onChange(e) {\n          return _this3.onChange(\"CPF\", e, formatCPF(e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1 flex horizontal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, __jsx(FormSimples, {\n        value: dataDeNascimento || \"\",\n        erro: erros.dataDeNascimento,\n        name: \"dataDeNascimento\",\n        placeholder: \"DD/MM/AAAA\",\n        label: \"Data de Nascimento\",\n        onChange: function onChange(e) {\n          return _this3.onChange(\"dataDeNascimento\", e, formatDataDeNascimento(e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      })), __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }, __jsx(FormSimples, {\n        value: telefone || \"\",\n        erro: erros.telefone,\n        name: \"telefone\",\n        placeholder: \"(34) 1234-5678\",\n        label: \"Telefone/Celular\",\n        onChange: function onChange(e) {\n          return _this3.onChange(\"telefone\", e, formatTelefone(e.target.value));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"flex-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, __jsx(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      }, \"DADOS DO CLIENTE\")), !this.props.usuario && this.renderDadosRegistro(), this.renderDadosUsuario());\n    }\n  }]);\n\n  return DadosClienteContainer;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    usuario: state.auth.usuario,\n    token: state.auth.token,\n    cliente: state.cliente.cliente,\n    form: state.checkout.form\n  };\n};\n\nexport default connect(mapStateToProps, actions)(DadosClienteContainer);","map":{"version":3,"sources":["C:/ecommerce-git/loja/containers/Cliente/DadosCliente.js"],"names":["React","Component","FormSimples","connect","actions","moment","validateCPF","formatDataDeNascimento","formatTelefone","formatCPF","DadosClienteContainer","erros","field","e","value","props","setForm","target","then","validate","email","senha","nome","cliente","CPF","cpf","telefone","telefones","dataDeNascimento","format","prevProps","form","usuario","length","setState","Object","keys","state","onChange","renderDadosRegistro","renderDadosUsuario","mapStateToProps","auth","token","checkout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport FormSimples from '../../components/Inputs/FormSimples';\r\nimport { connect } from 'react-redux';\r\nimport actions from '../../redux/actions';\r\nimport moment from 'moment';\r\n\r\nimport { validateCPF } from '../../utils/validate';\r\nimport { formatDataDeNascimento, formatTelefone, formatCPF } from '../../utils/format';\r\n\r\nclass DadosClienteContainer extends Component {\r\n\r\n    state = {\r\n        erros: {}\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.setForm({\r\n            email: \"\",\r\n            senha: \"\",\r\n            nome: this.props.cliente ? this.props.cliente.nome : \"\",\r\n            CPF: this.props.cliente ? this.props.cliente.cpf : \"\",\r\n            telefone: this.props.cliente && this.props.cliente.telefones ? \r\n                this.props.cliente.telefones[0] : \"\",\r\n            dataDeNascimento: this.props.cliente ? \r\n                moment(this.props.cliente.dataDeNascimento).format(\"DD/MM/YYYY\") : \"\"\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(!prevProps.cliente && this.props.cliente){\r\n            const { nome, cpf, telefones, dataDeNascimento } = this.props.cliente;\r\n            this.props.setForm({\r\n                nome, CPF: cpf, telefone: telefones[0], \r\n                dataDeNascimento: moment(dataDeNascimento).format(\"DD/MM/YYYY\")\r\n            });\r\n        }\r\n    }\r\n\r\n    validate(){\r\n        const { email, senha, nome, CPF, dataDeNascimento, telefone } = this.props.form;\r\n        const { usuario } = this.props;\r\n        const erros = {};\r\n\r\n        if(!usuario && !email) erros.email = \"Preencha aqui com o seu email\";\r\n        if(!usuario && !senha) erros.senha = \"Preencha aqui com a sua senha\";\r\n\r\n        if(!nome) erros.nome = \"Preencha aqui com o seu nome\";\r\n        if(!CPF || CPF.length !== 14) erros.CPF = \"Preencha aqui com o seu CPF\";\r\n        if(CPF && CPF.length === 14 && !validateCPF(CPF)) \r\n            erros.CPF = \"Preencha aqui com o seu CPF corretamente\";\r\n        if(!dataDeNascimento || dataDeNascimento.length !== 10)\r\n            erros.dataDeNascimento = \"Preencha aqui com a sua data de nascimento\";\r\n        if(!telefone || telefone.length < 11)\r\n            erros.telefone = \"Preencha aqui com o seu telefone\";\r\n\r\n        this.setState({ erros });\r\n        return !(Object.keys(erros).length > 0);\r\n    }\r\n\r\n    onChange = (field, e, value) => {\r\n        this.props.setForm({ [field]: value || e.target.value }, null)\r\n        .then(() => this.validate());\r\n    }\r\n\r\n    renderDadosRegistro(){\r\n        const { email, senha } = this.props.form;\r\n        const { erros } = this.state;\r\n        return (\r\n            <div className=\"flex-1 flex horizontal\">\r\n                <div className=\"flex-1\">\r\n                    <FormSimples \r\n                        value={email || \"\"} \r\n                        name=\"email\" \r\n                        placeholder=\"E-mail\" \r\n                        label=\"E-mail\" \r\n                        erro={erros.email}\r\n                        onChange={(e) => this.onChange(\"email\", e)} />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <FormSimples \r\n                        value={senha || \"\"} \r\n                        name=\"senha\" \r\n                        placeholder=\"Senha\" \r\n                        label=\"Senha\" \r\n                        type=\"password\"\r\n                        erro={erros.senha}\r\n                        onChange={(e) => this.onChange(\"senha\", e)} />\r\n                </div>                \r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderDadosUsuario(){\r\n        const { nome, CPF, dataDeNascimento, telefone } = this.props.form;\r\n        const { erros } = this.state;\r\n        return (\r\n            <div className=\"flex-1 flex vertical\">\r\n                <div className=\"flex-1\">\r\n                    <FormSimples \r\n                        value={nome || \"\"} \r\n                        name=\"nome\" \r\n                        placeholder=\"Nome\" \r\n                        label=\"Nome\" \r\n                        erro={erros.nome}\r\n                        onChange={(e) => this.onChange(\"nome\", e)} />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <FormSimples \r\n                        value={CPF || \"\"} \r\n                        name=\"CPF\" \r\n                        placeholder=\"CPF\" \r\n                        label=\"CPF\"\r\n                        erro={erros.CPF} \r\n                        onChange={(e) => this.onChange(\"CPF\", e, formatCPF(e.target.value))} />\r\n                </div>    \r\n                <div className=\"flex-1 flex horizontal\">\r\n                    <div className=\"flex-1\">\r\n                        <FormSimples \r\n                            value={dataDeNascimento || \"\"} \r\n                            erro={erros.dataDeNascimento}\r\n                            name=\"dataDeNascimento\" \r\n                            placeholder=\"DD/MM/AAAA\" \r\n                            label=\"Data de Nascimento\" \r\n                            onChange={(e) => this.onChange(\"dataDeNascimento\", e, formatDataDeNascimento(e.target.value))} />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                        <FormSimples \r\n                            value={telefone || \"\"}\r\n                            erro={erros.telefone}\r\n                            name=\"telefone\" \r\n                            placeholder=\"(34) 1234-5678\" \r\n                            label=\"Telefone/Celular\" \r\n                            onChange={(e) => this.onChange(\"telefone\", e, formatTelefone(e.target.value))} />\r\n                    </div>   \r\n                </div>            \r\n            </div>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"flex-1\">\r\n                <div>\r\n                    <h2>DADOS DO CLIENTE</h2>\r\n                </div>\r\n                { !this.props.usuario && this.renderDadosRegistro() }\r\n                { this.renderDadosUsuario() }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    usuario: state.auth.usuario,\r\n    token: state.auth.token,\r\n    cliente: state.cliente.cliente,\r\n    form: state.checkout.form\r\n});\r\n\r\nexport default connect(mapStateToProps, actions)(DadosClienteContainer);"]},"metadata":{},"sourceType":"module"}